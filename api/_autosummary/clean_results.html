

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>clean_results &mdash; GEddySoft 4.0.0 documentation</title>
      <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=b86133f3" />
      <link rel="stylesheet" type="text/css" href="../../_static/css/theme.css?v=e59714d7" />

  
      <script src="../../_static/jquery.js?v=5d32c60e"></script>
      <script src="../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="../../_static/documentation_options.js?v=3304f9e4"></script>
      <script src="../../_static/doctools.js?v=9a2dae69"></script>
      <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="clean_results.clean_results" href="clean_results.clean_results.html" />
    <link rel="prev" title="add_attributes.add_attributes" href="add_attributes.add_attributes.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../index.html" class="icon icon-home">
            GEddySoft
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">User Guide</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../user_guide/installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../user_guide/quickstart.html">Quick Start</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../user_guide/configuration.html">Configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../user_guide/performance.html">Performance</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../user_guide/running_example.html">Running on Example Dataset</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Project Info</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../version.html">Version History</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Implementation Details</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../theory/software_architecture.html">Software Architecture</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">API Reference</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">API Reference</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../index.html#core-modules">Core Modules</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../index.html#utility-functions">Utility Functions</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="add_attributes.html">add_attributes</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">clean_results</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#author">Author</a></li>
<li class="toctree-l4"><a class="reference internal" href="clean_results.clean_results.html">clean_results.clean_results</a></li>
<li class="toctree-l4"><a class="reference internal" href="clean_results.remove_entries_based_on_indices.html">clean_results.remove_entries_based_on_indices</a></li>
<li class="toctree-l4"><a class="reference internal" href="#clean_results.remove_entries_based_on_indices"><code class="docutils literal notranslate"><span class="pre">remove_entries_based_on_indices()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#clean_results.clean_results"><code class="docutils literal notranslate"><span class="pre">clean_results()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="compute_wind_direction.html">compute_wind_direction</a></li>
<li class="toctree-l3"><a class="reference internal" href="get_closest_value.html">get_closest_value</a></li>
<li class="toctree-l3"><a class="reference internal" href="get_ini.html">get_ini</a></li>
<li class="toctree-l3"><a class="reference internal" href="get_list_input_files.html">get_list_input_files</a></li>
<li class="toctree-l3"><a class="reference internal" href="logBinSpectrum.html">logBinSpectrum</a></li>
<li class="toctree-l3"><a class="reference internal" href="map_sonic2tracer.html">map_sonic2tracer</a></li>
<li class="toctree-l3"><a class="reference internal" href="nandetrend.html">nandetrend</a></li>
<li class="toctree-l3"><a class="reference internal" href="nanlinfit.html">nanlinfit</a></li>
<li class="toctree-l3"><a class="reference internal" href="prepare_output.html">prepare_output</a></li>
<li class="toctree-l3"><a class="reference internal" href="print_progress.html">print_progress</a></li>
<li class="toctree-l3"><a class="reference internal" href="read_GHG.html">read_GHG</a></li>
<li class="toctree-l3"><a class="reference internal" href="read_main_inputs.html">read_main_inputs</a></li>
<li class="toctree-l3"><a class="reference internal" href="read_metadata_files.html">read_metadata_files</a></li>
<li class="toctree-l3"><a class="reference internal" href="reformat_date.html">reformat_date</a></li>
</ul>
</li>
</ul>
</li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">GEddySoft</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../index.html">API Reference</a></li>
      <li class="breadcrumb-item active">clean_results</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../_sources/api/_autosummary/clean_results.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="module-clean_results">
<span id="clean-results"></span><h1>clean_results<a class="headerlink" href="#module-clean_results" title="Link to this heading"></a></h1>
<p>Module for cleaning and filtering eddy covariance results data.</p>
<p>This module provides functionality to clean processed results
by removing entries with invalid or missing sonic anemometer
data. It handles:</p>
<ul class="simple">
<li><p>Recursive cleaning of nested data structures</p></li>
<li><p>Preservation of metadata fields</p></li>
<li><p>Synchronized removal across all variables</p></li>
<li><p>Special handling of quality control flags</p></li>
</ul>
<p>The cleaning is based on NaN values in sonic wind speed data, which
indicates periods where core measurements were unavailable or invalid.</p>
<section id="author">
<h2>Author<a class="headerlink" href="#author" title="Link to this heading"></a></h2>
<p>B. Heinesch
University of Liege, Gembloux Agro-Bio Tech</p>
</section>
<p class="rubric">Functions</p>
<table class="autosummary longtable docutils align-default">
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="clean_results.clean_results.html#clean_results.clean_results" title="clean_results.clean_results"><code class="xref py py-obj docutils literal notranslate"><span class="pre">clean_results</span></code></a></p></td>
<td><p>Clean eddy covariance results by removing entries with invalid sonic data.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="clean_results.remove_entries_based_on_indices.html#clean_results.remove_entries_based_on_indices" title="clean_results.remove_entries_based_on_indices"><code class="xref py py-obj docutils literal notranslate"><span class="pre">remove_entries_based_on_indices</span></code></a></p></td>
<td><p>Remove entries at specified indices from nested data structures.</p></td>
</tr>
</tbody>
</table>
<dl class="py function">
<dt class="sig sig-object py" id="clean_results.remove_entries_based_on_indices">
<span class="sig-prename descclassname"><span class="pre">clean_results.</span></span><span class="sig-name descname"><span class="pre">remove_entries_based_on_indices</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">nan_indices</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">exceptions</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">[]</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/clean_results.html#remove_entries_based_on_indices"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#clean_results.remove_entries_based_on_indices" title="Link to this definition"></a></dt>
<dd><p>Remove entries at specified indices from nested data structures.</p>
<p>This helper function recursively traverses dictionaries and lists,
removing entries at specified indices while preserving structure
and handling exceptions.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>data</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.13)"><code class="xref py py-class docutils literal notranslate"><span class="pre">dict</span></code></a> or <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.13)"><code class="xref py py-class docutils literal notranslate"><span class="pre">list</span></code></a>) – The data structure to clean. Can be nested to any depth.</p></li>
<li><p><strong>nan_indices</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.13)"><code class="xref py py-class docutils literal notranslate"><span class="pre">list</span></code></a> of <a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code></a>) – Indices of entries to remove</p></li>
<li><p><strong>exceptions</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.13)"><code class="xref py py-class docutils literal notranslate"><span class="pre">list</span></code></a> of <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>, <em>optional</em>) – Keys in dictionaries that should not have entries removed,
typically metadata fields</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>If input is a list, returns filtered list
If input is a dict, modifies in place and returns None</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.13)"><code class="xref py py-class docutils literal notranslate"><span class="pre">list</span></code></a> or <a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a></p>
</dd>
</dl>
<p class="rubric">Notes</p>
<p>The function handles three cases:
1. Dictionaries: Recursively process each value
2. Lists: Filter out specified indices
3. Exception keys: Skip processing entirely</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="clean_results.clean_results">
<span class="sig-prename descclassname"><span class="pre">clean_results.</span></span><span class="sig-name descname"><span class="pre">clean_results</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">results</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/clean_results.html#clean_results"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#clean_results.clean_results" title="Link to this definition"></a></dt>
<dd><p>Clean eddy covariance results by removing entries with invalid sonic data.</p>
<p>This function removes data entries where sonic anemometer measurements
were invalid or missing (indicated by NaN values in wind speed). The
removal is synchronized across all variables to maintain data consistency.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>results</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.13)"><code class="xref py py-class docutils literal notranslate"><span class="pre">dict</span></code></a>) – <p>GEddySoft results dictionary containing:
- time : list</p>
<blockquote>
<div><p>Timestamps for each measurement period</p>
</div></blockquote>
<ul>
<li><dl>
<dt>MET<span class="classifier">dict</span></dt><dd><p>Meteorological measurements including:
- wsh : list</p>
<blockquote>
<div><p>Wind speed measurements (used to identify invalid periods)</p>
</div></blockquote>
<ul class="simple">
<li><dl class="simple">
<dt>qaqc<span class="classifier">dict</span></dt><dd><p>Quality control flags</p>
</dd>
</dl>
</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>TRACER<span class="classifier">dict, optional</span></dt><dd><p>Tracer gas measurements and associated QC</p>
</dd>
</dl>
</li>
</ul>
</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Cleaned results dictionary with invalid entries removed</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.13)"><code class="xref py py-class docutils literal notranslate"><span class="pre">dict</span></code></a></p>
</dd>
</dl>
<p class="rubric">Notes</p>
<p>The cleaning process:
1. Identifies invalid periods using NaN values in wind speed
2. Removes corresponding entries from all variables
3. Preserves structure and metadata
4. Handles QC flags separately to maintain integrity</p>
<p>The function assumes that NaN values in wind speed (wsh)
indicate periods where sonic data was invalid or missing,
typically due to:
- Incomplete data files
- Instrument malfunctions
- Communication errors</p>
</dd></dl>

</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="add_attributes.add_attributes.html" class="btn btn-neutral float-left" title="add_attributes.add_attributes" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="clean_results.clean_results.html" class="btn btn-neutral float-right" title="clean_results.clean_results" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2025, Bernard Heinesch.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>