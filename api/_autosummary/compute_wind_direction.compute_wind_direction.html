

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>compute_wind_direction.compute_wind_direction &mdash; GEddySoft 4.0.0 documentation</title>
      <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=b86133f3" />
      <link rel="stylesheet" type="text/css" href="../../_static/css/theme.css?v=e59714d7" />

  
      <script src="../../_static/jquery.js?v=5d32c60e"></script>
      <script src="../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="../../_static/documentation_options.js?v=3304f9e4"></script>
      <script src="../../_static/doctools.js?v=9a2dae69"></script>
      <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="get_closest_value" href="get_closest_value.html" />
    <link rel="prev" title="compute_wind_direction" href="compute_wind_direction.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../index.html" class="icon icon-home">
            GEddySoft
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">User Guide</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../user_guide/installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../user_guide/quickstart.html">Quick Start</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../user_guide/configuration.html">Configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../user_guide/performance.html">Performance</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../user_guide/running_example.html">Running on Example Dataset</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Project Info</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../version.html">Version History</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Implementation Details</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../theory/software_architecture.html">Software Architecture</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">API Reference</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">API Reference</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../index.html#core-modules">Core Modules</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../index.html#utility-functions">Utility Functions</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="add_attributes.html">add_attributes</a></li>
<li class="toctree-l3"><a class="reference internal" href="clean_results.html">clean_results</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="compute_wind_direction.html">compute_wind_direction</a><ul class="current">
<li class="toctree-l4 current"><a class="current reference internal" href="#">compute_wind_direction.compute_wind_direction</a></li>
<li class="toctree-l4"><a class="reference internal" href="compute_wind_direction.html#compute_wind_direction.compute_wind_direction"><code class="docutils literal notranslate"><span class="pre">compute_wind_direction()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="get_closest_value.html">get_closest_value</a></li>
<li class="toctree-l3"><a class="reference internal" href="get_ini.html">get_ini</a></li>
<li class="toctree-l3"><a class="reference internal" href="get_list_input_files.html">get_list_input_files</a></li>
<li class="toctree-l3"><a class="reference internal" href="logBinSpectrum.html">logBinSpectrum</a></li>
<li class="toctree-l3"><a class="reference internal" href="map_sonic2tracer.html">map_sonic2tracer</a></li>
<li class="toctree-l3"><a class="reference internal" href="nandetrend.html">nandetrend</a></li>
<li class="toctree-l3"><a class="reference internal" href="nanlinfit.html">nanlinfit</a></li>
<li class="toctree-l3"><a class="reference internal" href="prepare_output.html">prepare_output</a></li>
<li class="toctree-l3"><a class="reference internal" href="print_progress.html">print_progress</a></li>
<li class="toctree-l3"><a class="reference internal" href="read_GHG.html">read_GHG</a></li>
<li class="toctree-l3"><a class="reference internal" href="read_main_inputs.html">read_main_inputs</a></li>
<li class="toctree-l3"><a class="reference internal" href="read_metadata_files.html">read_metadata_files</a></li>
<li class="toctree-l3"><a class="reference internal" href="reformat_date.html">reformat_date</a></li>
</ul>
</li>
</ul>
</li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">GEddySoft</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../index.html">API Reference</a></li>
          <li class="breadcrumb-item"><a href="compute_wind_direction.html">compute_wind_direction</a></li>
      <li class="breadcrumb-item active">compute_wind_direction.compute_wind_direction</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../_sources/api/_autosummary/compute_wind_direction.compute_wind_direction.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="compute-wind-direction-compute-wind-direction">
<h1>compute_wind_direction.compute_wind_direction<a class="headerlink" href="#compute-wind-direction-compute-wind-direction" title="Link to this heading"></a></h1>
<dl class="py function">
<dt class="sig sig-object py" id="compute_wind_direction.compute_wind_direction">
<span class="sig-prename descclassname"><span class="pre">compute_wind_direction.</span></span><span class="sig-name descname"><span class="pre">compute_wind_direction</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">Usonic</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">Vsonic</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">SonicType</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">SonicNorthAzimuth</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/compute_wind_direction.html#compute_wind_direction"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#compute_wind_direction.compute_wind_direction" title="Link to this definition"></a></dt>
<dd><p>Convert sonic anemometer wind components to meteorological wind direction.</p>
<p>This function converts wind velocity components measured in sonic anemometer
coordinates to meteorological wind direction (direction FROM which the wind
is blowing). It handles different sonic types and mounting orientations.
The function is vectorized for improved performance.</p>
<section id="coordinate-systems">
<h2>Coordinate Systems<a class="headerlink" href="#coordinate-systems" title="Link to this heading"></a></h2>
<dl class="simple">
<dt>Meteorological (target):</dt><dd><ul class="simple">
<li><p>Umet: Positive = wind blowing to East</p></li>
<li><p>Vmet: Positive = wind blowing to North</p></li>
<li><p>Forms right-handed system with upward Wmet</p></li>
<li><p>Wind direction: 0° = North, 90° = East (direction wind is FROM)</p></li>
</ul>
</dd>
<dt>Sonic (source):</dt><dd><ul class="simple">
<li><p>Coordinate system varies by manufacturer</p></li>
<li><dl class="simple">
<dt>Vsonic axis angle (Vaz) depends on type:</dt><dd><ul>
<li><p>CSAT3: Vaz = array direction - 90°</p></li>
<li><p>Gill R2: Vaz = N arrow + 240° (U flipped)</p></li>
<li><p>Gill R3/HS50 AXIS: Vaz = N arrow + 240°</p></li>
<li><p>Gill R3/HS50 SPAR: Vaz = N arrow + 270°</p></li>
</ul>
</dd>
</dl>
</li>
</ul>
</dd>
</dl>
<p>Coordinate Diagram:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">v</span><span class="o">&gt;</span><span class="mi">0</span>
<span class="o">^</span>
<span class="o">|</span>
<span class="o">|</span>
<span class="o">+----&gt;</span> <span class="n">U</span><span class="o">&gt;</span><span class="mi">0</span>
</pre></div>
</div>
<p>Converting between Sonic and Meteorological Coordinates
Determine the angle with respect to true north, (0=N,90=E) of the +Vsonic
direction.
Call this angle Vaz. Looking from above, the sonic coordinate system is
therefore rotated Vaz degrees clockwise from meteorological coordinates.</p>
<p>For ATI and Campbell CSAT3 sonics, Vaz is the direction relative to
true north, straight into the array from the un-obstructed direction,
minus 90 degrees.
For Gill R2 sonics, if the sign of V is flipped, then Vaz is the angle
of the N arrow + 60. If the sign of U is flipped, then Vaz is the N arrow
direction + 240.
For Gill R3s in the AXIS configuration, Vaz is the N arrow direction
+ 240 degrees.</p>
<p>From this Meteorological Coordinates, the direction the  wind is blowing
FROM is finaly computed
:param Usonic: U wind component in sonic coordinates [m/s]
:type Usonic: <code class="xref py py-class docutils literal notranslate"><span class="pre">array_like</span></code>
:param Vsonic: V wind component in sonic coordinates [m/s]
:type Vsonic: <code class="xref py py-class docutils literal notranslate"><span class="pre">array_like</span></code>
:param SonicType: Sonic anemometer model/configuration:</p>
<blockquote>
<div><ul class="simple">
<li><p>‘R2’: Gill R2</p></li>
<li><p>‘R3Spar’: Gill R3 SPAR configuration</p></li>
<li><p>‘R3Axis’: Gill R3 AXIS configuration</p></li>
<li><p>‘HS50Spar’: Gill HS50 SPAR configuration</p></li>
<li><p>‘HS50Axis’: Gill HS50 AXIS configuration</p></li>
<li><p>‘CSAT3’: Campbell CSAT3</p></li>
</ul>
</div></blockquote>
<dl class="field-list simple">
<dt class="field-odd">type SonicType<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a></p>
</dd>
<dt class="field-even">param SonicNorthAzimuth<span class="colon">:</span></dt>
<dd class="field-even"><p>Azimuth angle of sonic anemometer reference direction
relative to true North [degrees] (=0 if pointing to North)</p>
</dd>
<dt class="field-odd">type SonicNorthAzimuth<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.13)"><code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code></a></p>
</dd>
<dt class="field-even">returns<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>Dirmet</strong> – Wind direction in meteorological coordinates [degrees]
(0-360°, direction wind is coming FROM)</p>
</dd>
<dt class="field-odd">rtype<span class="colon">:</span></dt>
<dd class="field-odd"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code></p>
</dd>
</dl>
<p class="rubric">Notes</p>
<p>The conversion process:
1. Convert U,V components to direction in sonic coordinates
2. Apply sonic-specific rotation (Vaz)
3. Correct for sonic mounting orientation (SonicNorthAzimuth)
4. Convert from ‘wind blowing TO’ to ‘wind blowing FROM’</p>
</section>
</dd></dl>

</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="compute_wind_direction.html" class="btn btn-neutral float-left" title="compute_wind_direction" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="get_closest_value.html" class="btn btn-neutral float-right" title="get_closest_value" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2025, Bernard Heinesch.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>